(function(c){"object"==typeof exports&&"object"==typeof module?c(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],c):c(CodeMirror)})(function(c){function n(d,g){return"pairs"==g&&"string"==typeof d?d:"object"==typeof d&&null!=d[g]?d[g]:e[g]}function h(d){return function(g){return b(g,d)}}function m(d){var g=d.state.closeBrackets,a;return g?(a=d.getModeAt(d.getCursor()),a.closeBrackets||g):null}function b(d,p){var e=m(d),k,f,b,q;if(!e||d.getOption("disableInput")||
(k=n(e,"pairs"),f=k.indexOf(p),-1==f))return c.Pass;for(var h=n(e,"triples"),C=k.charAt(f+1)==p,y=d.listSelections(),E=0==f%2,A,w,e=0;e<y.length;e++){var F=y[e],u=F.head;w=d.getRange(u,g(u.line,u.ch+1));if(E&&!F.empty())w="surround";else if(!C&&E||w!=p)if(C&&1<u.ch&&0<=h.indexOf(p)&&d.getRange(g(u.line,u.ch-2),u)==p+p&&(2>=u.ch||d.getRange(g(u.line,u.ch-3),g(u.line,u.ch-2))!=p))w="addFour";else if(C)if(!c.isWordChar(w)&&l(d,u,p))w="both";else return c.Pass;else if(E&&(d.getLine(u.line).length==u.ch||
a(w,k)||/\s/.test(w)))w="both";else return c.Pass;else w=0<=h.indexOf(p)&&d.getRange(u,g(u.line,u.ch+3))==p+p+p?"skipThree":"skip";if(A){if(A!=w)return c.Pass}else A=w}b=f%2?k.charAt(f-1):p;q=f%2?p:k.charAt(f+1);d.operation(function(){var a,e;if("skip"==A)d.execCommand("goCharRight");else if("skipThree"==A)for(e=0;3>e;e++)d.execCommand("goCharRight");else if("surround"==A){a=d.getSelections();for(e=0;e<a.length;e++)a[e]=b+a[e]+q;d.replaceSelections(a,"around");a=d.listSelections().slice();for(e=0;e<
a.length;e++){var p=a,f=e,k;k=a[e];var l=0<c.cmpPos(k.anchor,k.head);k={anchor:new g(k.anchor.line,k.anchor.ch+(l?-1:1)),head:new g(k.head.line,k.head.ch+(l?1:-1))};p[f]=k}d.setSelections(a)}else"both"==A?(d.replaceSelection(b+q,null),d.triggerElectric(b+q),d.execCommand("goCharLeft")):"addFour"==A&&(d.replaceSelection(b+b+b+b,"before"),d.execCommand("goCharRight"))})}function a(d,g){var a=g.lastIndexOf(d);return-1<a&&1==a%2}function f(d,a){var e=d.getRange(g(a.line,a.ch-1),g(a.line,a.ch+1));return 2==
e.length?e:null}function l(d,a,g){var e=d.getLine(a.line),k=d.getTokenAt(a);if(/\bstring2?\b/.test(k.type))return!1;g=new c.StringStream(e.slice(0,a.ch)+g+e.slice(a.ch),4);for(g.pos=g.start=k.start;;){if(e=d.getMode().token(g,k.state),g.pos>=a.ch+1)return/\bstring2?\b/.test(e);g.start=g.pos}}var e={pairs:"()[]{}''\"\"",triples:"",explode:"[]{}"},g=c.Pos,q,k,d;c.defineOption("autoCloseBrackets",!1,function(d,a,g){g&&g!=c.Init&&(d.removeKeyMap(k),d.state.closeBrackets=null);a&&(d.state.closeBrackets=
a,d.addKeyMap(k))});q=e.pairs+"`";k={Backspace:function(d){var a=m(d),e,k,b;if(!a||d.getOption("disableInput"))return c.Pass;e=n(a,"pairs");a=d.listSelections();for(b=0;b<a.length;b++)if(!a[b].empty()||(k=f(d,a[b].head),!k||0!=e.indexOf(k)%2))return c.Pass;for(b=a.length-1;0<=b;b--)k=a[b].head,d.replaceRange("",g(k.line,k.ch-1),g(k.line,k.ch+1),"+delete")},Enter:function(d){var a=m(d),a=a&&n(a,"explode"),g,e,k;if(!a||d.getOption("disableInput"))return c.Pass;g=d.listSelections();for(e=0;e<g.length;e++)if(!g[e].empty()||
(k=f(d,g[e].head),!k||0!=a.indexOf(k)%2))return c.Pass;d.operation(function(){var a,e;d.replaceSelection("\n\n",null);d.execCommand("goCharLeft");g=d.listSelections();for(a=0;a<g.length;a++)e=g[a].head.line,d.indentLine(e,null,!0),d.indentLine(e+1,null,!0)})}};for(d=0;d<q.length;d++)k["'"+q.charAt(d)+"'"]=h(q.charAt(d))});
(function(c){"object"==typeof exports&&"object"==typeof module?c(require("../../lib/codemirror"),require("../fold/xml-fold")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../fold/xml-fold"],c):c(CodeMirror)})(function(c){function n(l){var e,g,q,k,d,r;if(l.getOption("disableInput"))return c.Pass;e=l.listSelections();g=[];for(d=0;d<e.length;d++){if(!e[d].empty())return c.Pass;r=e[d].head;k=l.getTokenAt(r);var p=c.innerMode(l.getMode(),k.state),t=p.state;if("xml"!=p.mode.name||
!t.tagName)return c.Pass;var h=l.getOption("autoCloseTags"),n="html"==p.mode.configuration,p="object"==typeof h&&h.dontCloseTags||n&&a,n="object"==typeof h&&h.indentTags||n&&f,h=t.tagName;if(k.end>r.ch&&(h=h.slice(0,h.length-k.end+r.ch)),q=h.toLowerCase(),!h||"string"==k.type&&(k.end!=r.ch||!/[\"\']/.test(k.string.charAt(k.string.length-1))||1==k.string.length)||"tag"==k.type&&"closeTag"==t.type||k.string.indexOf("/")==k.string.length-1||p&&-1<m(p,q)||b(l,h,r,t,!0))return c.Pass;k=n&&-1<m(n,q);g[d]=
{indent:k,text:"\x3e"+(k?"\n\n":"")+"\x3c/"+h+"\x3e",newPos:k?c.Pos(r.line+1,0):c.Pos(r.line,r.ch+1)}}for(d=e.length-1;0<=d;d--)q=g[d],l.replaceRange(q.text,e[d].head,e[d].anchor,"+insert"),r=l.listSelections().slice(0),r[d]={head:q.newPos,anchor:q.newPos},l.setSelections(r),q.indent&&(l.indentLine(q.newPos.line,null,!0),l.indentLine(q.newPos.line+1,null,!0))}function h(a,e){for(var g,f=a.listSelections(),k=[],d=e?"/":"\x3c/",r=0;r<f.length;r++){if(!f[r].empty())return c.Pass;var p=f[r].head,h=a.getTokenAt(p);
g=c.innerMode(a.getMode(),h.state);var n=g.state;if(e&&("string"==h.type||"\x3c"!=h.string.charAt(0)||h.start!=p.ch-1))return c.Pass;if("xml"!=g.mode.name)if("htmlmixed"==a.getMode().name&&"javascript"==g.mode.name)g=d+"script";else if("htmlmixed"==a.getMode().name&&"css"==g.mode.name)g=d+"style";else return c.Pass;else{if(!n.context||!n.context.tagName||b(a,n.context.tagName,p,n))return c.Pass;g=d+n.context.tagName}"\x3e"!=a.getLine(p.line).charAt(h.end)&&(g+="\x3e");k[r]=g}a.replaceSelections(k);
f=a.listSelections();for(r=0;r<f.length;r++)(r==f.length-1||f[r].head.line<f[r+1].head.line)&&a.indentLine(f[r].head.line)}function m(a,e){if(a.indexOf)return a.indexOf(e);for(var g=0,f=a.length;g<f;++g)if(a[g]==e)return g;return-1}function b(a,e,g,f,k){var d,b,p;if(!c.scanForClosingTag||(d=Math.min(a.lastLine()+1,g.line+500),b=c.scanForClosingTag(a,g,null,d),!b||b.tag!=e))return!1;g=f.context;for(k=k?1:0;g&&g.tagName==e;g=g.prev)++k;g=b.to;for(b=1;b<k;b++){if(p=c.scanForClosingTag(a,g,null,d),!p||
p.tag!=e)return!1;g=p.to}return!0}c.defineOption("autoCloseTags",!1,function(a,e,g){if(g!=c.Init&&g&&a.removeKeyMap("autoCloseTags"),e)g={name:"autoCloseTags"},("object"!=typeof e||e.whenClosing)&&(g["'/'"]=function(a){return a.getOption("disableInput")?c.Pass:h(a,!0)}),("object"!=typeof e||e.whenOpening)&&(g["'\x3e'"]=function(a){return n(a)}),a.addKeyMap(g)});var a="area base br col command embed hr img input keygen link meta param source track wbr".split(" "),f="applet blockquote body button div dl fieldset form frameset h1 h2 h3 h4 h5 h6 head html iframe layer legend object ol p select table ul".split(" ");
c.commands.closeTag=function(a){return h(a)}});
(function(c){"object"==typeof exports&&"object"==typeof module?c(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],c):c(CodeMirror)})(function(c){function n(a){var f,b,e,g,q,k,d,r,p,n,m;if(a.getOption("disableInput"))return c.Pass;f=a.listSelections();e=[];for(g=0;g<f.length;g++){if(q=f[g].head,k=a.getTokenAt(q),"comment"!=k.type)return c.Pass;if(d=c.innerMode(a.getMode(),k.state).mode,b){if(b!=d)return c.Pass}else b=d;if(d=null,b.blockCommentStart&&
b.blockCommentContinue){if(r=k.string.indexOf(b.blockCommentEnd),p=a.getRange(c.Pos(q.line,0),c.Pos(q.line,k.end)),-1==r||r!=k.string.length-b.blockCommentEnd.length||!(q.ch>=r))if(0==k.string.indexOf(b.blockCommentStart)){if(d=p.slice(0,k.start),!/^\s*$/.test(d))for(d="",p=0;p<k.start;++p)d+=" "}else-1!=(m=p.indexOf(b.blockCommentContinue))&&m+b.blockCommentContinue.length>k.start&&/^\s*$/.test(p.slice(0,m))&&(d=p.slice(0,m));null!=d&&(d+=b.blockCommentContinue)}if(null==d&&b.lineComment&&h(a)&&
(n=a.getLine(q.line),m=n.indexOf(b.lineComment),-1<m&&(d=n.slice(0,m),/\S/.test(d)?d=null:d+=b.lineComment+n.slice(m+b.lineComment.length).match(/^\s*/)[0])),null==d)return c.Pass;e[g]="\n"+d}a.operation(function(){for(var d=f.length-1;0<=d;d--)a.replaceRange(e[d],f[d].from(),f[d].to(),"+insert")})}function h(a){return(a=a.getOption("continueComments"))&&"object"==typeof a?!1!==a.continueLineComment:!0}for(var m=["clike","css","javascript"],b=0;b<m.length;++b)c.extendMode(m[b],{blockCommentContinue:" * "});
c.defineOption("continueComments",null,function(a,b,l){var e,g;l&&l!=c.Init&&a.removeKeyMap("continueComment");b&&(e="Enter","string"==typeof b?e=b:"object"==typeof b&&b.key&&(e=b.key),g={name:"continueComment"},g[e]=n,a.addKeyMap(g))})});
(function(c){"object"==typeof exports&&"object"==typeof module?c(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],c):c(CodeMirror)})(function(c){function n(a,e,b,d){var c=a.getLineHandle(e.line),p=e.ch-1,c=0<=p&&l[c.text.charAt(p)]||l[c.text.charAt(++p)],n,m,v;return c?(n="\x3e"==c.charAt(1)?1:-1,b&&0<n!=(p==e.ch))?null:(m=a.getTokenTypeAt(f(e.line,p+1)),v=h(a,f(e.line,p+(0<n?1:0)),n,m||null,d),null==v)?null:{from:f(e.line,p),to:v&&v.pos,match:v&&
v.ch==c.charAt(0),forward:0<n}:null}function h(a,e,b,d,c){var p,h,n,m,x,B=c&&c.maxScanLineLength||1E4,D=c&&c.maxScanLines||1E3,C=[];c=c&&c.bracketRegex?c.bracketRegex:/[(){}[\]]/;for(var D=0<b?Math.min(e.line+D,a.lastLine()+1):Math.max(a.firstLine()-1,e.line-D),y=e.line;y!=D;y+=b)if((p=a.getLine(y),p)&&(h=0<b?0:p.length-1,n=0<b?p.length:-1,!(p.length>B)))for(y==e.line&&(h=e.ch-(0>b?1:0));h!=n;h+=b)if(m=p.charAt(h),c.test(m)&&(void 0===d||a.getTokenTypeAt(f(y,h+1))==d))if(x=l[m],"\x3e"==x.charAt(1)==
0<b)C.push(m);else if(C.length)C.pop();else return{pos:f(y,h),ch:m};return y-b==(0<b?a.lastLine():a.firstLine())?!1:null}function m(e,b,c){for(var d,l,p=e.state.matchBrackets.maxHighlightLineLength||1E3,h=[],m=e.listSelections(),v=0;v<m.length;v++)(d=m[v].empty()&&n(e,m[v].head,!1,c))&&e.getLine(d.from.line).length<=p&&(l=d.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",h.push(e.markText(d.from,f(d.from.line,d.from.ch+1),{className:l})),d.to&&e.getLine(d.to.line).length<=p&&h.push(e.markText(d.to,
f(d.to.line,d.to.ch+1),{className:l})));if(h.length)if(a&&e.state.focused&&e.focus(),c=function(){e.operation(function(){for(var d=0;d<h.length;d++)h[d].clear()})},b)setTimeout(c,800);else return c}function b(a){a.operation(function(){e&&(e(),e=null);e=m(a,!1,a.state.matchBrackets)})}var a=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||8>document.documentMode),f=c.Pos,l={"(":")\x3e",")":"(\x3c","[":"]\x3e","]":"[\x3c","{":"}\x3e","}":"{\x3c"},e=null;c.defineOption("matchBrackets",
!1,function(a,e,k){if(k&&k!=c.Init&&a.off("cursorActivity",b),e)a.state.matchBrackets="object"==typeof e?e:{},a.on("cursorActivity",b)});c.defineExtension("matchBrackets",function(){m(this,!0)});c.defineExtension("findMatchingBracket",function(a,e,b){return n(this,a,e,b)});c.defineExtension("scanForBracket",function(a,e,b,d){return h(this,a,e,b,d)})});
(function(c){"object"==typeof exports&&"object"==typeof module?c(require("../../lib/codemirror"),require("../fold/xml-fold")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../fold/xml-fold"],c):c(CodeMirror)})(function(c){function n(b){b.state.tagHit&&b.state.tagHit.clear();b.state.tagOther&&b.state.tagOther.clear();b.state.tagHit=b.state.tagOther=null}function h(b){b.state.failedTagMatch=!1;b.operation(function(){var a,f,l,e,g;(n(b),b.somethingSelected())||(a=b.getCursor(),
f=b.getViewport(),f.from=Math.min(f.from,a.line),f.to=Math.max(a.line+1,f.to),l=c.findMatchingTag(b,a,f),l)&&(b.state.matchBothTags&&(e="open"==l.at?l.open:l.close,e&&(b.state.tagHit=b.markText(e.from,e.to,{className:"CodeMirror-matchingtag"}))),g="close"==l.at?l.open:l.close,g?b.state.tagOther=b.markText(g.from,g.to,{className:"CodeMirror-matchingtag"}):b.state.failedTagMatch=!0)})}function m(b){b.state.failedTagMatch&&h(b)}c.defineOption("matchTags",!1,function(b,a,f){if(f&&f!=c.Init&&(b.off("cursorActivity",
h),b.off("viewportChange",m),n(b)),a)b.state.matchBothTags="object"==typeof a&&a.bothTags,b.on("cursorActivity",h),b.on("viewportChange",m),h(b)});c.commands.toMatchingTag=function(b){var a=c.findMatchingTag(b,b.getCursor()),f;a&&(f="close"==a.at?a.open:a.close,f&&b.extendSelection(f.to,f.from))}});
(function(c){"object"==typeof exports&&"object"==typeof module?c(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],c):c(CodeMirror)})(function(c){c.defineOption("showTrailingSpace",!1,function(n,h,m){m==c.Init&&(m=!1);m&&!h?n.removeOverlay("trailingspace"):!m&&h&&n.addOverlay({token:function(b){for(var a=b.string.length,c=a;c&&/\s/.test(b.string.charAt(c-1));--c);return c>b.pos?(b.pos=c,null):(b.pos=a,"trailingspace")},name:"trailingspace"})})});
(function(c){"object"==typeof exports&&"object"==typeof module?c(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],c):c(CodeMirror)})(function(c){function n(a,b,l,e){function g(d){var c=n(a,b),g,l;if(!c||c.to.line-c.from.line<k)return null;g=a.findMarksAt(c.from);for(l=0;l<g.length;++l)if(g[l].__isFold&&"fold"!==e){if(!d)return null;c.cleared=!0;g[l].clear()}return c}var n,k,d,r;if(l&&l.call?(n=l,l=null):n=m(a,l,"rangeFinder"),"number"==typeof b&&
(b=c.Pos(b,0)),k=m(a,l,"minFoldSize"),d=g(!0),m(a,l,"scanUp"))for(;!d&&b.line>a.firstLine();)b=c.Pos(b.line-1,0),d=g(!1);d&&!d.cleared&&"unfold"!==e&&(l=h(a,l),c.on(l,"mousedown",function(d){r.clear();c.e_preventDefault(d)}),r=a.markText(d.from,d.to,{replacedWith:l,clearOnEnter:!0,__isFold:!0}),r.on("clear",function(d,e){c.signal(a,"unfold",a,d,e)}),c.signal(a,"fold",a,d.from,d.to))}function h(a,b){var c=m(a,b,"widget"),e;return"string"==typeof c&&(e=document.createTextNode(c),c=document.createElement("span"),
c.appendChild(e),c.className="CodeMirror-foldmarker"),c}function m(a,c,l){return c&&void 0!==c[l]?c[l]:(a=a.options.foldOptions)&&void 0!==a[l]?a[l]:b[l]}c.newFoldFunction=function(a,b){return function(c,e){n(c,e,{rangeFinder:a,widget:b})}};c.defineExtension("foldCode",function(a,b,c){n(this,a,b,c)});c.defineExtension("isFolded",function(a){a=this.findMarksAt(a);for(var b=0;b<a.length;++b)if(a[b].__isFold)return!0});c.commands.toggleFold=function(a){a.foldCode(a.getCursor())};c.commands.fold=function(a){a.foldCode(a.getCursor(),
null,"fold")};c.commands.unfold=function(a){a.foldCode(a.getCursor(),null,"unfold")};c.commands.foldAll=function(a){a.operation(function(){for(var b=a.firstLine(),l=a.lastLine();b<=l;b++)a.foldCode(c.Pos(b,0),null,"fold")})};c.commands.unfoldAll=function(a){a.operation(function(){for(var b=a.firstLine(),l=a.lastLine();b<=l;b++)a.foldCode(c.Pos(b,0),null,"unfold")})};c.registerHelper("fold","combine",function(){var a=Array.prototype.slice.call(arguments,0);return function(b,c){for(var e,g=0;g<a.length;++g)if(e=
a[g](b,c),e)return e}});c.registerHelper("fold","auto",function(a,b){for(var c,e=a.getHelpers(b,"fold"),g=0;g<e.length;g++)if(c=e[g](a,b),c)return c});var b={rangeFinder:c.fold.auto,widget:"↔",minFoldSize:0,scanUp:!1};c.defineOption("foldOptions",null);c.defineExtension("foldOption",function(a,b){return m(this,a,b)})});
(function(c){"object"==typeof exports&&"object"==typeof module?c(require("../../lib/codemirror"),require("./foldcode")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./foldcode"],c):c(CodeMirror)})(function(c){function n(a){this.options=a;this.from=this.to=0}function h(a,d){for(var b=a.findMarksAt(q(d)),e=0;e<b.length;++e)if(b[e].__isFold&&b[e].find().from.line==d)return b[e]}function m(a){if("string"==typeof a){var d=document.createElement("div");return d.className=a+" CodeMirror-guttermarker-subtle",
d}return a.cloneNode(!0)}function b(a,d,b){var e=a.state.foldGutter.options,c=d,g=a.foldOption(e,"minFoldSize"),f=a.foldOption(e,"rangeFinder");a.eachLine(d,b,function(d){var b=null,l,r;h(a,c)?b=m(e.indicatorFolded):(l=q(c,0),r=f&&f(a,l),r&&r.to.line-r.from.line>=g&&(b=m(e.indicatorOpen)));a.setGutterMarker(d,e.gutter,b);++c})}function a(a){var d=a.getViewport(),e=a.state.foldGutter;e&&(a.operation(function(){b(a,d.from,d.to)}),e.from=d.from,e.to=d.to)}function f(a,d,b){var e=a.state.foldGutter,c,
g;e&&(c=e.options,b==c.gutter)&&(g=h(a,d),g?g.clear():a.foldCode(q(d,0),c.rangeFinder))}function l(b){var d=b.state.foldGutter,e;d&&(e=d.options,d.from=d.to=0,clearTimeout(d.changeUpdate),d.changeUpdate=setTimeout(function(){a(b)},e.foldOnChangeTimeSpan||600))}function e(e){var d=e.state.foldGutter,c;d&&(c=d.options,clearTimeout(d.changeUpdate),d.changeUpdate=setTimeout(function(){var c=e.getViewport();d.from==d.to||20<c.from-d.to||20<d.from-c.to?a(e):e.operation(function(){c.from<d.from&&(b(e,c.from,
d.from),d.from=c.from);c.to>d.to&&(b(e,d.to,c.to),d.to=c.to)})},c.updateViewportTimeSpan||400))}function g(a,d){var e=a.state.foldGutter,c;e&&(c=d.line,c>=e.from&&c<e.to&&b(a,c,c+1))}c.defineOption("foldGutter",!1,function(b,d,h){if(h&&h!=c.Init&&(b.clearGutter(b.state.foldGutter.options.gutter),b.state.foldGutter=null,b.off("gutterClick",f),b.off("change",l),b.off("viewportChange",e),b.off("fold",g),b.off("unfold",g),b.off("swapDoc",l)),d){h=b.state;var p=d;d=(!0===p&&(p={}),null==p.gutter&&(p.gutter=
"CodeMirror-foldgutter"),null==p.indicatorOpen&&(p.indicatorOpen="CodeMirror-foldgutter-open"),null==p.indicatorFolded&&(p.indicatorFolded="CodeMirror-foldgutter-folded"),p);h.foldGutter=new n(d);a(b);b.on("gutterClick",f);b.on("change",l);b.on("viewportChange",e);b.on("fold",g);b.on("unfold",g);b.on("swapDoc",l)}});var q=c.Pos});
(function(c){"object"==typeof exports&&"object"==typeof module?c(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],c):c(CodeMirror)})(function(c){c.registerHelper("fold","brace",function(n,h){function m(d){for(var e,g=h.ch,l=0;;)if(e=0>=g?-1:a.lastIndexOf(d,g-1),-1==e){if(1==l)break;l=1;g=a.length}else{if(1==l&&e<h.ch)break;if(f=n.getTokenTypeAt(c.Pos(b,e+1)),!/^(comment|string)/.test(f))return e+1;g=e-1}}var b=h.line,a=n.getLine(b),f,l="{",e="}",
g=m("{"),q,k,d,r,p,t,z,v,x;if(null==g&&(l="[",e="]",g=m("[")),null!=g){q=1;k=n.lastLine();p=b;a:for(;p<=k;++p)for(t=n.getLine(p),z=p==b?g:0;v=t.indexOf(l,z),x=t.indexOf(e,z),0>v&&(v=t.length),0>x&&(x=t.length),z=Math.min(v,x),z!=t.length;){if(n.getTokenTypeAt(c.Pos(p,z+1))==f)if(z==v)++q;else if(!--q){d=p;r=z;break a}++z}if(null!=d&&(b!=d||r!=g))return{from:c.Pos(b,g),to:c.Pos(d,r)}}});c.registerHelper("fold","import",function(n,h){function m(a){var b,g,f,h;if(a<n.firstLine()||a>n.lastLine()||(b=
n.getTokenAt(c.Pos(a,1)),/\S/.test(b.string)||(b=n.getTokenAt(c.Pos(a,b.end+1))),"keyword"!=b.type||"import"!=b.string))return null;g=a;for(a=Math.min(n.lastLine(),a+10);g<=a;++g)if(f=n.getLine(g),h=f.indexOf(";"),-1!=h)return{startCh:b.end,end:c.Pos(g,h)}}h=h.line;var b=m(h),a,f;if(!b||m(h-1)||(a=m(h-2))&&a.end.line==h-1)return null;for(a=b.end;f=m(a.line+1),null!=f;)a=f.end;return{from:n.clipPos(c.Pos(h,b.startCh+1)),to:a}});c.registerHelper("fold","include",function(n,h){function m(a){if(a<n.firstLine()||
a>n.lastLine())return null;var b=n.getTokenAt(c.Pos(a,1));return/\S/.test(b.string)||(b=n.getTokenAt(c.Pos(a,b.end+1))),"meta"==b.type&&"#include"==b.string.slice(0,8)?b.start+8:void 0}h=h.line;var b=m(h),a,f;if(null==b||null!=m(h-1))return null;for(a=h;f=m(a+1),null!=f;)++a;return{from:c.Pos(h,b+1),to:n.clipPos(c.Pos(a))}})});
(function(c){"object"==typeof exports&&"object"==typeof module?c(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],c):c(CodeMirror)})(function(c){c.registerGlobalHelper("fold","comment",function(c){return c.blockCommentStart&&c.blockCommentEnd},function(n,h){var m=n.getModeAt(h),b=m.blockCommentStart,m=m.blockCommentEnd,a,f,l,e,g,q,k,d,r,p,t;if(b&&m){a=h.line;f=n.getLine(a);e=h.ch;for(g=0;;)if(l=0>=e?-1:f.lastIndexOf(b,e-1),-1==l){if(1==g)return;
g=1;e=f.length}else{if(1==g&&l<h.ch)return;if(/comment/.test(n.getTokenTypeAt(c.Pos(a,l+1)))&&(f.slice(l-m.length,l)==m||!/comment/.test(n.getTokenTypeAt(c.Pos(a,l))))){l+=b.length;break}e=l-1}f=1;e=n.lastLine();g=a;a:for(;g<=e;++g)for(d=n.getLine(g),r=g==a?l:0;p=d.indexOf(b,r),t=d.indexOf(m,r),0>p&&(p=d.length),0>t&&(t=d.length),r=Math.min(p,t),r!=d.length;){if(r==p)++f;else if(!--f){q=g;k=r;break a}++r}if(null!=q&&(a!=q||k!=l))return{from:c.Pos(a,l),to:c.Pos(q,k)}}})});
(function(c){"object"==typeof exports&&"object"==typeof module?c(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],c):c(CodeMirror)})(function(c){c.registerHelper("fold","indent",function(n,h){var m=n.getOption("tabSize"),b=n.getLine(h.line),a,f,l,e;if(/\S/.test(b)){var g=c.countColumn(b,null,m),q=null;a=h.line+1;for(f=n.lastLine();a<=f;++a)if(l=n.getLine(a),e=c.countColumn(l,null,m),e>g)q=a;else if(/\S/.test(l))break;if(q)return{from:c.Pos(h.line,
b.length),to:c.Pos(q,n.getLine(q).length)}}})});
(function(c){"object"==typeof exports&&"object"==typeof module?c(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],c):c(CodeMirror)})(function(c){function n(a,b,e,c){this.line=b;this.ch=e;this.cm=a;this.text=a.getLine(b);this.min=c?c.from:a.firstLine();this.max=c?c.to-1:a.lastLine()}function h(a,b){var e=a.cm.getTokenTypeAt(q(a.line,b));return e&&/\btag\b/.test(e)}function m(a){if(!(a.line>=a.max))return a.ch=0,a.text=a.cm.getLine(++a.line),!0}
function b(a){if(!(a.line<=a.min))return a.text=a.cm.getLine(--a.line),a.ch=a.text.length,!0}function a(a){for(var b,e,c;;){if(b=a.text.indexOf("\x3e",a.ch),-1==b)if(m(a))continue;else break;if(h(a,b+1))return e=a.text.lastIndexOf("/",b),c=-1<e&&!/\S/.test(a.text.slice(e+1,b)),a.ch=b+1,c?"selfClose":"regular";a.ch=b+1}}function f(a){for(var e,c;;){if(e=a.ch?a.text.lastIndexOf("\x3c",a.ch-1):-1,-1==e)if(b(a))continue;else break;if(!h(a,e+1))a.ch=e;else if(k.lastIndex=e,a.ch=e,c=k.exec(a.text),c&&c.index==
e)return c}}function l(a){for(;;){k.lastIndex=a.ch;var b=k.exec(a.text);if(!b)if(m(a))continue;else break;if(h(a,b.index+1))return a.ch=b.index+b[0].length,b;a.ch=b.index+1}}function e(b,e){for(var c=[],g;;){var f=l(b),h,k=b.line,n=b.ch-(f?f[0].length:0);if(!f||!(h=a(b)))break;if("selfClose"!=h)if(f[1]){for(g=c.length-1;0<=g;--g)if(c[g]==f[2]){c.length=g;break}if(0>g&&(!e||e==f[2]))return{tag:f[2],from:q(k,n),to:q(b.line,b.ch)}}else c.push(f[2])}}function g(a,e){for(var c=[],g,k;;){var l;a:{l=a;for(var n=
void 0,m=k=void 0;;){if(n=l.ch?l.text.lastIndexOf("\x3e",l.ch-1):-1,-1==n)if(b(l))continue;else{l=void 0;break a}if(h(l,n+1)){l=(k=l.text.lastIndexOf("/",n),m=-1<k&&!/\S/.test(l.text.slice(k+1,n)),l.ch=n+1,m?"selfClose":"regular");break a}else l.ch=n}}if(g=l,!g)break;if("selfClose"==g)f(a);else{m=a.line;l=a.ch;n=f(a);if(!n)break;if(n[1])c.push(n[2]);else{for(k=c.length-1;0<=k;--k)if(c[k]==n[2]){c.length=k;break}if(0>k&&(!e||e==n[2]))return{tag:n[2],from:q(a.line,a.ch),to:q(m,l)}}}}}var q=c.Pos,k=
RegExp("\x3c(/?)([A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*)","g");c.registerHelper("fold","xml",function(b,c){for(var g=new n(b,c.line,0),f,h,k;f=l(g),
f&&g.line==c.line&&(h=a(g));)if(!f[1]&&"selfClose"!=h)return c=q(g.line,g.ch),k=e(g,f[2]),k&&{from:c,to:k.from}});c.findMatchingTag=function(b,c,h){var k=new n(b,c.line,c.ch,h),l;if(-1!=k.text.indexOf("\x3e")||-1!=k.text.indexOf("\x3c")){var m=a(k),x=m&&q(k.line,k.ch),B=m&&f(k);if(m&&B&&!(0<(k.line-c.line||k.ch-c.ch)))return(l={from:q(k.line,k.ch),to:x,tag:B[2]},"selfClose"==m)?{open:l,close:null,at:"open"}:B[1]?{open:g(k,B[2]),close:l,at:"close"}:(k=new n(b,x.line,x.ch,h),{open:l,close:e(k,B[2]),
at:"open"})}};c.findEnclosingTag=function(a,b,c){for(var f=new n(a,b.line,b.ch,c),k,h,l;k=g(f),k;)if(h=new n(a,b.line,b.ch,c),l=e(h,k.tag),l)return{open:k,close:l}};c.scanForClosingTag=function(a,b,c,g){a=new n(a,b.line,b.ch,g?{from:0,to:g}:null);return e(a,c)}});
(function(){CodeMirror.defineExtension("autoFormatAll",function(c,n){for(var h,m=this,b=m.getMode(),a=m.getRange(c,n).split("\n"),f=CodeMirror.copyState(b,m.getTokenAt(c).state),l=m.getOption("tabSize"),e="",g=0,q=0==c.ch,k=0;k<a.length;++k){for(h=new CodeMirror.StringStream(a[k],l);!h.eol();){var d=CodeMirror.innerMode(b,f),r=b.token(h,f),p=h.current();h.start=h.pos;(!q||/\S/.test(p))&&(e+=p,q=!1);!q&&d.mode.newlineAfterToken&&d.mode.newlineAfterToken(r,p,h.string.slice(h.pos)||a[k+1]||"",d.state)&&
(e+="\n",q=!0,++g)}!h.pos&&b.blankLine&&b.blankLine(f);!q&&k<a.length-1&&(e+="\n",q=!0,++g)}m.operation(function(){m.replaceRange(e,c,n);for(var a=c.line+1,b=c.line+g;a<=b;++a)m.indentLine(a,"smart");m.setCursor({line:0,ch:0})})})})();
(function(){function c(c){for(var h,m,b=[/for\s*?\((.*?)\)/g,/&#?[a-z0-9]+;[\s\S]/g,/\"(.*?)((\")|$)/g,/\/\*(.*?)(\*\/|$)/g,/^\/\/.*/g],a=[],f=0;f<b.length;f++)for(h=0;h<c.length;)if(m=c.substr(h).match(b[f]),null!=m)a.push({start:h+m.index,end:h+m.index+m[0].length}),h+=m.index+Math.max(1,m[0].length);else break;return a.sort(function(a,b){return a.start-b.start}),a}CodeMirror.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(c,h){return/^[;{}]$/.test(h)}});CodeMirror.extendMode("javascript",
{commentStart:"/*",commentEnd:"*/",wordWrapChars:[";","\\{","\\}"],autoFormatLineBreaks:function(n){var h=0,m=this.jsonMode?function(a){return a.replace(/([,{])/g,"$1\n").replace(/}/g,"\n}")}:function(a){return a.replace(/(;|\{|\})([^\r\n;])/g,"$1\n$2")},b=c(n),a="",f;if(null!=b){for(f=0;f<b.length;f++)b[f].start>h&&(a+=m(n.substring(h,b[f].start)),h=b[f].start),b[f].start<=h&&b[f].end>=h&&(a+=n.substring(h,b[f].end),h=b[f].end);h<n.length&&(a+=m(n.substr(h)))}else a=m(n);return a.replace(/^\n*|\n*$/,
"")}});CodeMirror.extendMode("xml",{commentStart:"\x3c!--",commentEnd:"--\x3e",noBreak:!1,noBreakEmpty:null,tagType:"",tagName:"",isXML:!1,newlineAfterToken:function(c,h,m){var b=!1,a=null,f="",l;if(this.isXML="xml"==this.configuration?!0:!1,"comment"==c||/\x3c!--/.test(m))return!1;if("tag"==c){if(0==h.indexOf("\x3c")&&0==!h.indexOf("\x3c/")&&(this.tagType="open",a=h.match(/^<\s*?([\w]+?)$/i),this.tagName=null!=a?a[1]:"",f=this.tagName.toLowerCase(),-1!="|label|li|option|textarea|title|a|b|bdi|bdo|big|center|cite|del|em|font|i|img|ins|s|small|span|strike|strong|sub|sup|u|".indexOf("|"+
f+"|")&&(this.noBreak=!0)),0==h.indexOf("\x3e")&&"open"==this.tagType)return(this.tagType="",l=this.isXML?"[^\x3c]*?":"",RegExp("^"+l+"\x3c/s*?"+this.tagName+"s*?\x3e","i").test(m))?(this.noBreak=!1,this.isXML||(this.tagName=""),!1):(b=this.noBreak,this.noBreak=!1,b?!1:!0);if(0==h.indexOf("\x3c/")&&(this.tagType="close",a=h.match(/^<\/\s*?([\w]+?)$/i),null!=a&&(f=a[1].toLowerCase()),-1!="|a|b|bdi|bdo|big|center|cite|del|em|font|i|img|ins|s|small|span|strike|strong|sub|sup|u|".indexOf("|"+f+"|")&&
(this.noBreak=!0)),0==h.indexOf("\x3e")&&"close"==this.tagType)return(this.tagType="",0==m.indexOf("\x3c")&&(a=m.match(/^<\/?\s*?([\w]+?)(\s|>)/i),f=null!=a?a[1].toLowerCase():"",-1=="|label|li|option|textarea|title|a|b|bdi|bdo|big|center|cite|del|em|font|i|img|ins|s|small|span|strike|strong|sub|sup|u|".indexOf("|"+f+"|")))?(this.noBreak=!1,!0):(b=this.noBreak,this.noBreak=!1,b?!1:!0)}return 0==m.indexOf("\x3c")?(this.noBreak=!1,this.isXML&&""!=this.tagName)?(this.tagName="",!1):(a=m.match(/^<\/?\s*?([\w]+?)(\s|>)/i),
f=null!=a?a[1].toLowerCase():"",-1!="|label|li|option|textarea|title|a|b|bdi|bdo|big|center|cite|del|em|font|i|img|ins|s|small|span|strike|strong|sub|sup|u|".indexOf("|"+f+"|")?!1:!0):!1}});CodeMirror.defineExtension("commentRange",function(c,h,m){var b=this,a=CodeMirror.innerMode(b.getMode(),b.getTokenAt(h).state).mode;b.operation(function(){if(c)b.replaceRange(a.commentEnd,m),b.replaceRange(a.commentStart,h),h.line==m.line&&h.ch==m.ch&&b.setCursor(h.line,h.ch+a.commentStart.length);else{var f=b.getRange(h,
m),l=f.indexOf(a.commentStart),e=f.lastIndexOf(a.commentEnd);-1<l&&-1<e&&e>l&&(f=f.substr(0,l)+f.substring(l+a.commentStart.length,e)+f.substr(e+a.commentEnd.length));b.replaceRange(f,h,m)}})});CodeMirror.defineExtension("autoIndentRange",function(c,h){var m=this;this.operation(function(){for(var b=c.line;b<=h.line;b++)m.indentLine(b,"smart")})});CodeMirror.defineExtension("autoFormatRange",function(c,h){for(var m,b=this,a=b.getMode(),f=b.getRange(c,h).split("\n"),l=CodeMirror.copyState(a,b.getTokenAt(c).state),
e=b.getOption("tabSize"),g="",q=0,k=0==c.ch,d=0;d<f.length;++d){for(m=new CodeMirror.StringStream(f[d],e);!m.eol();){var r=CodeMirror.innerMode(a,l),p=a.token(m,l),t=m.current();m.start=m.pos;(!k||/\S/.test(t))&&(g+=t,k=!1);!k&&r.mode.newlineAfterToken&&r.mode.newlineAfterToken(p,t,m.string.slice(m.pos)||f[d+1]||"",r.state)&&(g+="\n",k=!0,++q)}!m.pos&&a.blankLine&&a.blankLine(l);!k&&d<f.length-1&&(g+="\n",k=!0,++q)}b.operation(function(){b.replaceRange(g,c,h);for(var a=c.line+1,e=c.line+q;a<=e;++a)b.indentLine(a,
"smart");b.setSelection(c,b.getCursor(!1))})})})();
(function(c){"object"==typeof exports&&"object"==typeof module?c(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],c):c(CodeMirror)})(function(c){function n(b){for(var c=0;c<b.state.activeLines.length;c++)b.removeLineClass(b.state.activeLines[c],"wrap",a),b.removeLineClass(b.state.activeLines[c],"background",f),b.removeLineClass(b.state.activeLines[c],"gutter",l)}function h(a,b){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!=
b[c])return!1;return!0}function m(b,c){for(var m,k,d=[],r=0;r<c.length;r++)(m=c[r],m.empty())&&(k=b.getLineHandleVisualStart(m.head.line),d[d.length-1]!=k&&d.push(k));h(b.state.activeLines,d)||b.operation(function(){n(b);for(var c=0;c<d.length;c++)b.addLineClass(d[c],"wrap",a),b.addLineClass(d[c],"background",f),b.addLineClass(d[c],"gutter",l);b.state.activeLines=d})}function b(a,b){m(a,b.ranges)}var a="CodeMirror-activeline",f="CodeMirror-activeline-background",l="CodeMirror-activeline-gutter";c.defineOption("styleActiveLine",
!1,function(a,g,f){f=f&&f!=c.Init;g&&!f?(a.state.activeLines=[],m(a,a.listSelections()),a.on("beforeSelectionChange",b)):!g&&f&&(a.off("beforeSelectionChange",b),n(a),delete a.state.activeLines)})});
(function(c){"object"==typeof exports&&"object"==typeof module?c(require("../../lib/codemirror"),require("./matchesonscrollbar")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./matchesonscrollbar"],c):c(CodeMirror)})(function(c){function n(a){this.options={};for(var b in l)this.options[b]=(a&&a.hasOwnProperty(b)?a:l)[b];this.matchesonscroll=this.overlay=this.timeout=null}function h(b){var c=b.state.matchHighlighter;clearTimeout(c.timeout);c.timeout=setTimeout(function(){a(b)},
c.options.delay)}function m(a,b,c,k){var d=a.state.matchHighlighter,h;a.addOverlay(d.overlay=f(b,c,k));d.options.annotateScrollbar&&a.showMatchesOnScrollbar&&(h=c?new RegExp("\\b"+b+"\\b"):b,d.matchesonscroll=a.showMatchesOnScrollbar(h,!0,{className:"CodeMirror-selection-highlight-scrollbar"}))}function b(a){var b=a.state.matchHighlighter;b.overlay&&(a.removeOverlay(b.overlay),b.overlay=null,b.matchesonscroll&&(b.matchesonscroll.clear(),b.matchesonscroll=null))}function a(a){a.operation(function(){var c=
a.state.matchHighlighter,f,k,d;if(b(a),!a.somethingSelected()&&c.options.showToken){f=!0===c.options.showToken?/[\w$]/:c.options.showToken;d=a.getCursor();k=a.getLine(d.line);for(var h=d=d.ch;d&&f.test(k.charAt(d-1));)--d;for(;h<k.length&&f.test(k.charAt(h));)++h;d<h&&m(a,k.slice(d,h),f,c.options.style)}else{var l;if((l=(f=a.getCursor("from"),k=a.getCursor("to"),f.line==k.line))&&!(l=!c.options.wordsOnly)){var n;l=null!==a.getRange(f,k).match(/^\w+$/)?0<f.ch&&(h={line:f.line,ch:f.ch-1},n=a.getRange(h,
f),null===n.match(/\W/))?!1:k.ch<a.getLine(f.line).length&&(h={line:k.line,ch:k.ch+1},n=a.getRange(k,h),null===n.match(/\W/))?!1:!0:!1}l&&(d=a.getRange(f,k),c.options.trim&&(d=d.replace(/^\s+|\s+$/g,"")),d.length>=c.options.minChars&&m(a,d,!1,c.options.style))}})}function f(a,b,c){return{token:function(f){var d;if(d=f.match(a))(d=!b)||(d=(!f.start||!b.test(f.string.charAt(f.start-1)))&&(f.pos==f.string.length||!b.test(f.string.charAt(f.pos))));if(d)return c;f.next();f.skipTo(a.charAt(0))||f.skipToEnd()}}}
var l={style:"matchhighlight",minChars:2,delay:100,wordsOnly:!1,annotateScrollbar:!1,showToken:!1,trim:!0};c.defineOption("highlightSelectionMatches",!1,function(e,f,l){if(l&&l!=c.Init&&(b(e),clearTimeout(e.state.matchHighlighter.timeout),e.state.matchHighlighter=null,e.off("cursorActivity",h)),f)e.state.matchHighlighter=new n(f),a(e),e.on("cursorActivity",h)})});
(function(c){"object"==typeof exports&&"object"==typeof module?c(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],c):c(CodeMirror)})(function(c){c.multiplexingMode=function(n){function h(b,a,c,h){var e,g;return"string"==typeof a?(e=b.indexOf(a,c),h&&-1<e?e+a.length:e):(g=a.exec(c?b.slice(c):b),g?g.index+c+(h?g[0].length:0):-1)}var m=Array.prototype.slice.call(arguments,1);return{startState:function(){return{outer:c.startState(n),innerActive:null,
inner:null}},copyState:function(b){return{outer:c.copyState(n,b.outer),innerActive:b.innerActive,inner:b.innerActive&&c.copyState(b.innerActive.mode,b.inner)}},token:function(b,a){var f,l,e,g,q,k;if(a.innerActive)return(f=a.innerActive,q=b.string,!f.close&&b.sol())?(a.innerActive=a.inner=null,this.token(b,a)):(k=f.close?h(q,f.close,b.pos,f.parseDelimiters):-1,k!=b.pos||f.parseDelimiters)?(-1<k&&(b.string=q.slice(0,k)),l=f.mode.token(b,a.inner),-1<k&&(b.string=q),k==b.pos&&f.parseDelimiters&&(a.innerActive=
a.inner=null),f.innerStyle&&(l=l?l+" "+f.innerStyle:f.innerStyle),l):(b.match(f.close),a.innerActive=a.inner=null,f.delimStyle&&f.delimStyle+" "+f.delimStyle+"-close");f=Infinity;q=b.string;for(l=0;l<m.length;++l){if(e=m[l],k=h(q,e.open,b.pos),k==b.pos)return e.parseDelimiters||b.match(e.open),a.innerActive=e,a.inner=c.startState(e.mode,n.indent?n.indent(a.outer,""):0),e.delimStyle&&e.delimStyle+" "+e.delimStyle+"-open";-1!=k&&k<f&&(f=k)}return Infinity!=f&&(b.string=q.slice(0,f)),g=n.token(b,a.outer),
Infinity!=f&&(b.string=q),g},indent:function(b,a){var f=b.innerActive?b.innerActive.mode:n;return f.indent?f.indent(b.innerActive?b.inner:b.outer,a):c.Pass},blankLine:function(b){var a=b.innerActive?b.innerActive.mode:n,f,h;if(a.blankLine&&a.blankLine(b.innerActive?b.inner:b.outer),b.innerActive)"\n"===b.innerActive.close&&(b.innerActive=b.inner=null);else for(f=0;f<m.length;++f)h=m[f],"\n"===h.open&&(b.innerActive=h,b.inner=c.startState(h.mode,a.indent?a.indent(b.outer,""):0))},electricChars:n.electricChars,
innerMode:function(b){return b.inner?{state:b.inner,mode:b.innerActive.mode}:{state:b.outer,mode:n}}}}});